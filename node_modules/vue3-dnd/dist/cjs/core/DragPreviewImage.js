"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = void 0;
var _vueDemi = require("vue-demi");
var _default = (0, _vueDemi).defineComponent({
    props: {
        connect: {
            type: Function,
            required: true
        },
        src: {
            type: String,
            required: true
        }
    },
    setup: function setup(props) {
        (0, _vueDemi).watchEffect(function() {
            if (typeof Image === "undefined") return;
            var connected = false;
            var img = new Image();
            img.src = props.src;
            img.onload = function() {
                props.connect(img);
                connected = true;
            };
            return function() {
                if (connected) {
                    props.connect(null);
                }
            };
        });
        return function() {
            return null;
        };
    }
});
exports.default = _default;
